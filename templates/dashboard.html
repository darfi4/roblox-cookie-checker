{% extends "base.html" %}
{% block title %}Дашборд - RCC Pro{% endblock %}

{% block content %}
<section class="hero">
    <h1 class="hero-title">Дашборд</h1>
    <p class="hero-subtitle">Обзор вашей активности и статистика</p>
</section>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value stat-total">{{ total_scans }}</div>
        <div>Всего проверок</div>
    </div>
    <div class="stat-card">
        <div class="stat-value stat-total">{{ total_cookies }}</div>
        <div>Всего куки проверено</div>
    </div>
    <div class="stat-card">
        <div class="stat-value stat-valid">{{ valid_cookies }}</div>
        <div>Валидных куки</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: var(--info);">{{ ((valid_cookies / total_cookies * 100) if total_cookies > 0 else 0)|round(1) }}%</div>
        <div>Процент валидных</div>
    </div>
</div>

<div class="card-grid">
    <div class="card">
        <h2 class="card-title"><i class="fas fa-history"></i> Последние проверки</h2>
        {% if scans %}
            <div style="max-height: 400px; overflow-y: auto;">
                {% for scan in scans %}
                <div style="padding: 1rem; border-bottom: 1px solid var(--glass-border);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>Проверка #{{ scan.id }}</strong>
                            <div style="font-size: 0.8rem; opacity: 0.7;">
                                {{ scan.created_at.strftime('%d.%m.%Y %H:%M') }}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div>Куки: {{ scan.total_cookies }}</div>
                            <div style="color: var(--secondary);">Валидных: {{ scan.valid_cookies }}</div>
                        </div>
                    </div>
                    <a href="{{ url_for('download_scan', scan_id=scan.id) }}" class="btn" style="margin-top: 0.5rem; padding: 0.5rem 1rem; font-size: 0.8rem;">
                        <i class="fas fa-download"></i> Скачать результаты
                    </a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="text-align: center; opacity: 0.7;">У вас еще нет проверок</p>
            <a href="{{ url_for('index') }}" class="btn" style="width: 100%; margin-top: 1rem;">
                <i class="fas fa-search"></i> Начать проверку
            </a>
        {% endif %}
    </div>

    <div class="card">
        <h2 class="card-title"><i class="fas fa-bolt"></i> Быстрые действия</h2>
        <div style="display: grid; gap: 1rem;">
            <a href="{{ url_for('index') }}" class="btn">
                <i class="fas fa-search"></i> Новая проверка
            </a>
            <a href="{{ url_for('history') }}" class="btn">
                <i class="fas fa-history"></i> Вся история
            </a>
            <a href="{{ url_for('profile') }}" class="btn">
                <i class="fas fa-user"></i> Мой профиль
            </a>
        </div>
        
        <div style="margin-top: 2rem; padding: 1rem; background: var(--glass-dark); border-radius: 10px;">
            <h3 style="margin-bottom: 0.5rem;"><i class="fas fa-tips"></i> Советы</h3>
            <ul style="list-style: none; padding: 0;">
                <li>• Проверяйте куки партиями до 50 штук</li>
                <li>• Скачивайте результаты для анализа</li>
                <li>• Следите за уровнем безопасности аккаунтов</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}